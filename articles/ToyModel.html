<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Configure a MEMC Model â€¢ MEMC</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Configure a MEMC Model">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MEMC</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../articles/Manual.html">Mannual</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-examples" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Examples</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-examples">
<li><a class="dropdown-item" href="../articles/ModelComparison.html">Run all model configurations</a></li>
    <li><a class="dropdown-item" href="../articles/sensLocal.html">Local sensitivity analysis</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/JGCRI/hector"><span class="fa fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Configure a MEMC Model</h1>
            
      

      <div class="d-none name"><code>ToyModel.Rmd</code></div>
    </div>

    
    
<p>The <code>memc_configure</code> function allows users to build their
own SOM model. All of the MEMC models use the same SOM pool structure
but users will be able to decide which of the following dynamics.</p>
<p><img src="pool_structure.png"></p>
<p>The <code>memc_configure</code> function allows users to build their
own SOM model. All of the MEMC models use the same SOM pool structure
but users will be able to decide which of the formulations (LM, MM, RMM,
ECA, or DD) are used for POM decomposition (1), DOM uptake (2), and
microbial biomass decay (3). The following example will demonstrate how
changing the DOM uptake flux impacts the model projections.</p>
<p>Set up the model configuration using the default paramaters and
inital carbon pool values.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Running memc_configure will print a table describing the model configuration. </span></span>
<span><span class="va">mod1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/memc_configure.html">memc_configure</a></span><span class="op">(</span>params <span class="op">=</span> <span class="va">memc_params</span>, </span>
<span>                            state <span class="op">=</span> <span class="va">memc_initial_state</span>, </span>
<span>                            name <span class="op">=</span> <span class="st">"Model 1"</span>, </span>
<span>                            DOMuptake <span class="op">=</span> <span class="st">"MM"</span>, </span>
<span>                            POMdecomp <span class="op">=</span> <span class="st">"LM"</span>, </span>
<span>                            MBdecay <span class="op">=</span> <span class="st">"LM"</span><span class="op">)</span></span></code></pre></div>
<p>Take a look at all the details of the new model configuraiton</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">mod1</span><span class="op">)</span></span>
<span><span class="co">#&gt; $name</span></span>
<span><span class="co">#&gt; [1] "Model 1"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $table</span></span>
<span><span class="co">#&gt;     model DOMuptake POMdecomp MBdecay</span></span>
<span><span class="co">#&gt; 1 Model 1        MM        LM      LM</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $params</span></span>
<span><span class="co">#&gt;    parameter                                              description</span></span>
<span><span class="co">#&gt; 1        V_p        maximum specific decomposition rate for POM by EP</span></span>
<span><span class="co">#&gt; 2        K_p        half-saturation constant for decomposition of POM</span></span>
<span><span class="co">#&gt; 3        V_m        maximum specific decomposition rate for MOM by EM</span></span>
<span><span class="co">#&gt; 4        K_m        half-saturation constant for decomposition of MOM</span></span>
<span><span class="co">#&gt; 5        V_d       maximum specific uptake rate of D for growth of MB</span></span>
<span><span class="co">#&gt; 6        K_d half-saturation constant of uptake of D for growth of MB</span></span>
<span><span class="co">#&gt; 7        f_d                fraction of decomposed P allocated to DOM</span></span>
<span><span class="co">#&gt; 8        g_d                      fraction of dead B allocated to DOM</span></span>
<span><span class="co">#&gt; 9       p_ep                      fraction of mR for production of EP</span></span>
<span><span class="co">#&gt; 10      p_em                      fraction of mR for production of EM</span></span>
<span><span class="co">#&gt; 11      r_ep                                      turnover rate of EP</span></span>
<span><span class="co">#&gt; 12      r_em                                      turnover rate of EM</span></span>
<span><span class="co">#&gt; 13     Q_max                            maximum DOC sorption capacity</span></span>
<span><span class="co">#&gt; 14     K_ads                                 specific adsorption rate</span></span>
<span><span class="co">#&gt; 15     K_des                                          desorption rate</span></span>
<span><span class="co">#&gt; 16   dd_beta            strength of density dependent microbial decay</span></span>
<span><span class="co">#&gt; 17 Input_POM                                               POM input </span></span>
<span><span class="co">#&gt; 18 Input_DOM                                                DOM input</span></span>
<span><span class="co">#&gt; 19       CUE                                    carbon use efficiency</span></span>
<span><span class="co">#&gt;              units   value</span></span>
<span><span class="co">#&gt; 1  mgC mgC^-1 d^-1  14.000</span></span>
<span><span class="co">#&gt; 2     mgC / g soil  50.000</span></span>
<span><span class="co">#&gt; 3  mgC mgC^-1 d^-1   0.250</span></span>
<span><span class="co">#&gt; 4      mg C/g soil 250.000</span></span>
<span><span class="co">#&gt; 5  mgC mgC^-1 d^-1   3.000</span></span>
<span><span class="co">#&gt; 6      mg C/g soil   0.250</span></span>
<span><span class="co">#&gt; 7             &lt;NA&gt;   0.500</span></span>
<span><span class="co">#&gt; 8             &lt;NA&gt;   0.500</span></span>
<span><span class="co">#&gt; 9             &lt;NA&gt;   0.010</span></span>
<span><span class="co">#&gt; 10            &lt;NA&gt;   0.010</span></span>
<span><span class="co">#&gt; 11 mgC mgC^-1 d^-1   0.001</span></span>
<span><span class="co">#&gt; 12 mgC mgC^-1 d^-1   0.001</span></span>
<span><span class="co">#&gt; 13    mgC / g soil   3.400</span></span>
<span><span class="co">#&gt; 14 mgC mgC^-1 d^-1   0.006</span></span>
<span><span class="co">#&gt; 15 mgC mgC^-1 d^-1   0.001</span></span>
<span><span class="co">#&gt; 16            &lt;NA&gt;   1.000</span></span>
<span><span class="co">#&gt; 17            mg C   0.000</span></span>
<span><span class="co">#&gt; 18            mg C   0.000</span></span>
<span><span class="co">#&gt; 19                   0.400</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $state</span></span>
<span><span class="co">#&gt;      POM      MOM      QOM       MB      DOM       EP       EM       IC </span></span>
<span><span class="co">#&gt; 10.00000  5.00000  0.10000  2.00000  1.00000  0.00001  0.00001  0.00000 </span></span>
<span><span class="co">#&gt;      Tot </span></span>
<span><span class="co">#&gt; 18.10002</span></span></code></pre></div>
<p>or the summary table of the dynamics being used.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mod1</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">model</th>
<th align="left">DOMuptake</th>
<th align="left">POMdecomp</th>
<th align="left">MBdecay</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">Model 1</td>
<td align="left">MM</td>
<td align="left">LM</td>
<td align="left">LM</td>
</tr></tbody>
</table>
<p>Use <code>memc_solve</code> to run our model.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod1_out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/memc_solve.html">memc_solve</a></span><span class="op">(</span>mod <span class="op">=</span> <span class="va">mod1</span>, time <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">50</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mod1_out</span><span class="op">)</span></span>
<span><span class="co">#&gt;     time variable        value       units    name</span></span>
<span><span class="co">#&gt;    &lt;num&gt;   &lt;fctr&gt;        &lt;num&gt;      &lt;char&gt;  &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:     0      POM 10.000000000 mg C/g soil Model 1</span></span>
<span><span class="co">#&gt; 2:     1      POM  0.078133991 mg C/g soil Model 1</span></span>
<span><span class="co">#&gt; 3:     2      POM  0.057178745 mg C/g soil Model 1</span></span>
<span><span class="co">#&gt; 4:     3      POM  0.025336371 mg C/g soil Model 1</span></span>
<span><span class="co">#&gt; 5:     4      POM  0.010945045 mg C/g soil Model 1</span></span>
<span><span class="co">#&gt; 6:     5      POM  0.004727821 mg C/g soil Model 1</span></span></code></pre></div>
<p>Now switch the DOM uptake to use the RMM dynamics.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Running memc_configure will print a table describing the model configuration. </span></span>
<span><span class="va">mod2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/memc_configure.html">memc_configure</a></span><span class="op">(</span>params <span class="op">=</span> <span class="va">memc_params</span>, </span>
<span>                            state <span class="op">=</span> <span class="va">memc_initial_state</span>, </span>
<span>                            name <span class="op">=</span> <span class="st">"Model 2"</span>, </span>
<span>                            DOMuptake <span class="op">=</span> <span class="st">"RMM"</span>, </span>
<span>                            POMdecomp <span class="op">=</span> <span class="st">"LM"</span>, </span>
<span>                            MBdecay <span class="op">=</span> <span class="st">"LM"</span><span class="op">)</span></span>
<span><span class="va">mod2_out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/memc_solve.html">memc_solve</a></span><span class="op">(</span>mod <span class="op">=</span> <span class="va">mod2</span>, time <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">50</span><span class="op">)</span></span></code></pre></div>
<p>Now try setting the DOM uptake to ECA dynamics.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Running memc_configure will print a table describing the model configuration. </span></span>
<span><span class="va">mod3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/memc_configure.html">memc_configure</a></span><span class="op">(</span>params <span class="op">=</span> <span class="va">memc_params</span>, </span>
<span>                            state <span class="op">=</span> <span class="va">memc_initial_state</span>, </span>
<span>                            name <span class="op">=</span> <span class="st">"Model 3"</span>, </span>
<span>                            DOMuptake <span class="op">=</span> <span class="st">"ECA"</span>, </span>
<span>                            POMdecomp <span class="op">=</span> <span class="st">"LM"</span>, </span>
<span>                            MBdecay <span class="op">=</span> <span class="st">"LM"</span><span class="op">)</span></span>
<span><span class="va">mod3_out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/memc_solve.html">memc_solve</a></span><span class="op">(</span>mod <span class="op">=</span> <span class="va">mod3</span>, time <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">50</span><span class="op">)</span></span></code></pre></div>
<p>Compare the model results with one another.</p>
<p><img src="ToyModel_files/figure-html/unnamed-chunk-8-1.png" width="768"></p>
<p>For more examples and tutorials please see our <a href="https://microbial-explicit-model.github.io/MEMC/">online
documentation</a>.</p>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Kalyn Dorheim, Jianqiu Zheng.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>

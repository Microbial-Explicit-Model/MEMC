---
title: "Build Toy Model"
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>", 
  fig.width = 6, fig.height = 5, 
  warning = FALSE
)
```

After following the [installation instructions](Install-Build.html) you should be ready to follow along with this tutorial where we will walk you through how to build your own toy model, which you can compare with one of the pre built model configurations. 


```{r setup}
library(MEMC)     # MEMC should already be installed, see installation instructions. 
library(ggplot2)  # package used to visualize results 
library(knitr)    # makes nice tables
library(magrittr) # import the %>% pipeline

# set a theme to use in all the plots
theme_set(theme_bw() + theme(legend.title = element_blank()))
```


Save a copy of the default parameters and initial state values included in the package.

```{r}
param_table <- MEMC::default_params
initial_state <- MEMC::default_initial
```

Set up a time vector. 
```{r}
# Set up a time vector 
t <- seq(from = 1, to = 1e4, by = 10)
```

Using the `configure_model` users can make decision about which dynamics to use when modeling the DOM and POM decomposition and MB decay.

```{r}
toy_model <- configure_model(params = param_table, 
                             state = initial_state, 
                             name = "Toy", 
                             DOMdecomp = "ECA", 
                             POMdecomp = "LM")
```

Solve the toy model and the default MEND configuration. 
```{r}
toy_out  <- solve_model(toy_model, t)
mend_out <- solve_model(MEND_model, t)
```

Compare configurations 

```{r}
kable(rbind(toy_model, MEND_model))
```

Compare model outputs. 


```{r}
rbind(toy_out$results, mend_out$results) %>% 
     ggplot(aes(time, value, color = name, linetype = name)) + 
  geom_line(size = 0.75) + 
  facet_wrap("variable", scales = "free") + 
    labs(title = "Comparison of MEND & Toy Model ", 
       y = unique(toy_out$units)) + 
  facet_wrap("variable", scales = "free")
```



